---
phase: 07-polish-and-deployment
plan: 03
type: execute
depends_on: ["07-01", "07-02"]
files_modified: []
---

<objective>
Build production-ready bundle, optimize performance, test responsive layouts, and deploy to Vercel for public access.

Purpose: Ship the completed SWMRHA site to production with optimal performance and verified responsive design.
Output: Live production site on Vercel, performance metrics documented, responsive testing complete.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-polish-and-deployment/07-01-SUMMARY.md
@.planning/phases/07-polish-and-deployment/07-02-SUMMARY.md
@package.json

**Tech stack available:**
- Next.js 16.1.6 with App Router
- Vercel CLI for deployment
- All pages complete and SEO-optimized

**Known issues:**
- OneDrive sync conflict with .next directory during `npm run build` (from Phase 6)
- TypeScript validation with `npx tsc --noEmit` works fine
- Workaround: May need to temporarily stop OneDrive sync or use `npx tsc --noEmit` for validation

**Deployment context:**
- First deployment to Vercel
- No environment variables needed for MVP
- No external services requiring secrets
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build production bundle and verify optimization</name>
  <files>None (reads all files, generates .next/ directory)</files>
  <action>
    Build the production bundle and verify optimization:

    1. **TypeScript validation first:**
       - Run `npx tsc --noEmit` to verify no TypeScript errors
       - This is more reliable than full build given OneDrive sync issues

    2. **Attempt production build:**
       - Run `npm run build`
       - If OneDrive sync conflict occurs (.next directory), try one of these workarounds:
         a) Temporarily pause OneDrive sync during build
         b) Add .next to OneDrive exclusions
         c) Build in a non-synced directory
       - If build succeeds, proceed to analyze bundle

    3. **Analyze build output:**
       - Review build output for:
         - All routes successfully generated (12 pages + sitemap + robots)
         - Bundle sizes reasonable (First Load JS should be < 100KB for main pages)
         - No warnings about large client bundles
         - Image optimization working (if any images used)

    4. **Test production build locally (if build succeeds):**
       - Run `npm run start` to test production build
       - Visit a few key pages to verify everything works
       - Check browser console for any errors

    If build continues to fail due to OneDrive, document the workaround used and proceed to deployment (Vercel will build in clean environment).
  </action>
  <verify>
    - `npx tsc --noEmit` passes with no errors
    - Production build completes OR workaround documented
    - Build output shows all 12 pages successfully generated
    - No critical warnings in build output
  </verify>
  <done>Production build verified. TypeScript compiles clean. Build analysis complete. No critical performance issues identified.</done>
</task>

<task type="auto">
  <name>Task 2: Deploy to Vercel</name>
  <files>May create: .vercel/ directory, vercel.json if needed</files>
  <action>
    Deploy the site to Vercel:

    1. **Install Vercel CLI if not present:**
       - Check: `vercel --version`
       - If not installed: User likely has it globally, but if needed: `npm install -g vercel`

    2. **Initialize Vercel project:**
       - Run: `vercel login` (triggers authentication gate if not logged in)
       - Run: `vercel` (first deploy) or `vercel --yes` (auto-accept defaults)
       - Accept defaults:
         - Project name: swmrha
         - Framework preset: Next.js (should auto-detect)
         - Build command: npm run build (default)
         - Output directory: .next (default)

    3. **Complete deployment:**
       - Vercel will build in their environment (no OneDrive conflict)
       - Wait for deployment to complete
       - Capture deployment URL from output
       - Note: First deploy is preview; run `vercel --prod` for production

    4. **Production deployment:**
       - Run: `vercel --prod` to deploy to production domain
       - Capture production URL

    If authentication is required, this will trigger an auth gate checkpoint automatically.
  </action>
  <verify>
    - `vercel ls` shows the deployed project
    - Deployment URL accessible
    - Visit deployment URL in browser - site loads
  </verify>
  <done>Site deployed to Vercel. Production URL captured. Deployment accessible via browser.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete SWMRHA website deployed to Vercel production</what-built>
  <how-to-verify>
    Comprehensive production verification and responsive testing:

    **1. Functional verification:**
    Visit the production URL and test:
    - Home page loads with hero image and content
    - Navigation works (desktop dropdowns, mobile hamburger menu)
    - All pages accessible from navigation
    - External links work (sponsors, Facebook, NRHA resources)
    - Clickable tel: and mailto: links work on mobile/desktop
    - Gallery lightbox functions properly
    - No broken images or missing assets
    - Footer displays correctly on all pages

    **2. SEO verification:**
    - View page source on any page
    - Confirm meta tags present (title, description, Open Graph)
    - Confirm JSON-LD structured data present
    - Visit /sitemap.xml - displays properly
    - Visit /robots.txt - displays properly

    **3. Responsive testing:**
    Test on multiple viewport sizes (or use browser DevTools):
    - **Desktop (1920px):** Full layout, navigation dropdowns, multi-column grids
    - **Laptop (1440px):** Layout maintains structure
    - **Tablet (768px):** Navigation transitions, grids adapt to 2 columns
    - **Mobile (375px):** Hamburger menu, single column layout, no horizontal scroll

    Verify on all viewports:
    - No layout breaks or overlapping content
    - Text remains readable (no tiny fonts)
    - Images scale appropriately
    - Navigation accessible and functional
    - CTAs and buttons are tappable (no too-small touch targets)

    **4. Performance check:**
    - Run Lighthouse audit in Chrome DevTools (Performance, SEO, Accessibility scores)
    - Note any critical issues (score < 50) that need immediate attention
    - Good scores: Performance > 80, Accessibility > 90, SEO > 90

    **5. Cross-browser check (time permitting):**
    - Test in Chrome/Edge (primary)
    - Test in Safari (if on macOS) or Firefox
    - Verify basic functionality works in both

    **Expected results:**
    - All pages load and function correctly
    - Navigation works on desktop and mobile
    - Responsive layouts work at all breakpoints
    - No broken links or missing assets
    - SEO tags and structured data present
    - Lighthouse scores are acceptable
  </how-to-verify>
  <resume-signal>Type "approved" to complete the phase, or describe any production issues found</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] TypeScript compiles without errors
- [ ] Production build succeeds (or workaround documented for OneDrive issue)
- [ ] Site deployed to Vercel production
- [ ] All pages accessible on production URL
- [ ] Responsive layouts verified across breakpoints
- [ ] SEO elements verified (meta tags, sitemap, robots.txt)
- [ ] User confirms production site is approved
</verification>

<success_criteria>

- Production build completes successfully
- Site deployed to Vercel and accessible via HTTPS
- All pages load and function correctly in production
- Responsive design verified across desktop, tablet, and mobile
- SEO metadata and structured data present
- No critical errors or broken functionality
- User approves production deployment
- Phase 7 complete - MVP ready for public launch
  </success_criteria>

<output>
After completion, create `.planning/phases/07-polish-and-deployment/07-03-SUMMARY.md`:

# Phase 7 Plan 3: Performance & Deployment Summary

**[Substantive one-liner describing production deployment]**

## Accomplishments

- Built production bundle with Next.js optimization
- [Documented OneDrive build workaround if applicable]
- Deployed site to Vercel production: [production URL]
- Verified responsive layouts across desktop, tablet, and mobile viewports
- Confirmed all functionality works in production
- [Lighthouse scores: Performance X, Accessibility Y, SEO Z]
- [Any performance optimizations applied]

## Files Created/Modified

- `.vercel/` - Vercel project configuration (ignored by git)
- [vercel.json if custom config was needed, or "None"]

## Decisions Made

- **Production URL**: [URL]
- **Build workaround**: [If OneDrive issue encountered, document solution]
- [Any deployment configuration choices, or "None"]

## Deployment Metrics

- **Build time**: [time]
- **Total routes**: 12 pages + sitemap + robots.txt
- **First Load JS**: [size from build output]
- **Lighthouse scores**: Performance [X], Accessibility [Y], SEO [Z], Best Practices [W]

## Issues Encountered

[Any deployment issues, build problems, or production bugs discovered and how they were resolved, or "None"]

## Next Step

**Phase 7 complete.** SWMRHA website MVP is live in production and ready for public launch. Project complete!
</output>

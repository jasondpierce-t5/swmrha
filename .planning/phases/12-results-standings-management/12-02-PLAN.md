---
phase: 12-results-standings-management
plan: 02
type: execute
depends_on: ["12-01"]
files_modified: [src/app/admin/results/page.tsx, src/app/admin/results/new/page.tsx, src/app/admin/results/[id]/edit/page.tsx, src/components/ResultForm.tsx, src/components/DeleteResultButton.tsx]
---

<objective>
Build the admin interface for managing results: list page with table, create/edit pages with form component, and delete with confirmation.

Purpose: Enable admins to add, edit, and remove show results and standings links through the admin dashboard without code changes.
Output: Complete admin CRUD UI for results at /admin/results, /admin/results/new, and /admin/results/[id]/edit.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/12-results-standings-management/12-01-SUMMARY.md

# Prior admin UI patterns (follow exactly):
@src/app/admin/shows/page.tsx
@src/app/admin/shows/new/page.tsx
@src/app/admin/shows/[id]/edit/page.tsx
@src/components/ShowForm.tsx
@src/components/DeleteShowButton.tsx
@src/app/admin/sponsors/page.tsx
@src/components/SponsorForm.tsx
@src/components/DeleteSponsorButton.tsx

# Server actions and types from Plan 01:
@src/lib/actions/results.ts
@src/types/database.ts

**Tech stack available:** Next.js 16.1.6, React Server Components, Tailwind CSS v4, Heroicons, useTransition
**Established patterns:** server-component-list-page, client-form-with-useTransition, DeleteButton-client-component, ArrowLeftIcon-back-link
**Constraining decisions:**
- Phase 10-02: DeleteShowButton as separate client component (window.confirm requires client JS) — follow same pattern
- Phase 10-02: ShowForm controlled state with useTransition — follow same pattern
- Phase 11-02: Constrained SELECT dropdown for level — use same pattern for category dropdown
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create admin results list page with table and delete button</name>
  <files>src/app/admin/results/page.tsx, src/components/DeleteResultButton.tsx</files>
  <action>
**DeleteResultButton** — follow DeleteShowButton/DeleteSponsorButton pattern exactly:
- Client component with useTransition
- window.confirm with result label
- Calls deleteResult(id) action
- Props: resultId, resultLabel

**Admin results list page** (`src/app/admin/results/page.tsx`) — follow shows/sponsors list pattern:
- Server component calling getResults()
- Array.isArray() error guard pattern
- Page header: "Results & Standings" title, "Manage show results and standings links" description
- "Add Result" button (PlusIcon + gold-500 bg) linking to /admin/results/new
- Error state (red border alert)
- Empty state with TrophyIcon and "Add your first result" link
- Table with columns: Label, Category, URL (truncated, displayed without https://), Sort Order, Actions (Edit + Delete)
- Category display: format 'current_year' → 'Current Year', 'past_results' → 'Past Results', 'standings' → 'Standings' using a simple display helper
- Edit links to /admin/results/[id]/edit
- Delete via DeleteResultButton component

Table styling: same navy-700/800 borders, gold-500 headers, hover:bg-navy-700/50 rows as shows/sponsors tables.
  </action>
  <verify>Page renders at /admin/results with table of seeded results. Delete button shows confirm dialog.</verify>
  <done>Admin results list page shows all results in table with edit/delete actions. DeleteResultButton works with confirmation. Empty and error states handled.</done>
</task>

<task type="auto">
  <name>Task 2: Create ResultForm component and admin create/edit pages</name>
  <files>src/components/ResultForm.tsx, src/app/admin/results/new/page.tsx, src/app/admin/results/[id]/edit/page.tsx</files>
  <action>
**ResultForm** — follow ShowForm/SponsorForm pattern with client component, useTransition, useRouter:

Form fields:
- `label` (text input, required) — "Label" with placeholder "e.g., 2025 Rt 66 Slide Results"
- `url` (text input, required) — "URL" with placeholder "e.g., https://www.whitehorseshowmgt.com/..."
- `category` (SELECT dropdown, required) — "Category" with 3 options: Current Year, Past Results, Standings. Use constrained dropdown pattern from SponsorForm level field. Map display values to DB values: 'Current Year' → 'current_year', 'Past Results' → 'past_results', 'Standings' → 'standings'
- `sort_order` (number input) — "Sort Order" defaulting to 0

Layout: label full-width, url full-width, category and sort_order in 2-column grid (sm:grid-cols-2).

Props: `{ result?: ResultRow; action: 'create' | 'edit' }` — same pattern as ShowForm/SponsorForm.

Submit calls createResult or updateResult. On success, router.push('/admin/results'). Error displayed in red alert box.

inputClasses constant matches existing forms exactly.

**Create page** (`src/app/admin/results/new/page.tsx`):
- Back link "Back to Results" with ArrowLeftIcon → /admin/results
- Title "Add New Result"
- Description "Add a new result or standings link"
- `<ResultForm action="create" />`

**Edit page** (`src/app/admin/results/[id]/edit/page.tsx`):
- Async server component, params typed as `Promise<{ id: string }>` (Next.js 16 pattern — match shows/sponsors exactly)
- Fetch result via getResult(id), notFound() if missing/error
- Back link → /admin/results
- Title "Edit Result"
- Description: "Update the details for &ldquo;{result.label}&rdquo;"
- `<ResultForm result={result} action="edit" />`

Do NOT add image upload (results are links only). Keep the form simple — 4 fields total.
  </action>
  <verify>Navigate to /admin/results/new — form renders with all fields. Submit creates result and redirects. Navigate to /admin/results/[id]/edit — form pre-populated with existing data. Submit updates and redirects.</verify>
  <done>ResultForm handles create and edit modes with category dropdown. Create page at /admin/results/new works. Edit page at /admin/results/[id]/edit pre-populates form. Both redirect to list on success.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Admin results list page renders at /admin/results
- [ ] Table shows all results with Label, Category, URL, Sort Order, Actions columns
- [ ] "Add Result" button links to /admin/results/new
- [ ] DeleteResultButton shows confirmation and deletes
- [ ] Create form at /admin/results/new has 4 fields (label, url, category, sort_order)
- [ ] Category is a constrained SELECT dropdown with 3 options
- [ ] Edit form at /admin/results/[id]/edit pre-populates with existing data
- [ ] Forms redirect to /admin/results on successful submit
- [ ] Error states displayed properly
- [ ] All styling matches existing admin pages (navy/gold theme)
- [ ] `npm run build` succeeds
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Admin CRUD flow works: list → create → edit → delete
- UI matches existing shows/sponsors admin patterns exactly
</success_criteria>

<output>
After completion, create `.planning/phases/12-results-standings-management/12-02-SUMMARY.md`
</output>

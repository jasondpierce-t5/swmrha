---
phase: 09-authentication-admin-foundation
plan: 03
type: execute
depends_on: ["09-01"]
files_modified: [src/app/admin/layout.tsx, src/app/admin/page.tsx, src/components/AdminSidebar.tsx, src/components/AdminHeader.tsx, src/lib/admin-navigation.ts]
---

<objective>
Build the admin layout shell with sidebar navigation, header with user info, and dashboard landing page with content summary cards.

Purpose: Create the professional admin experience that non-technical board members can navigate confidently — the frame that all management features (Phases 10-12) build on.
Output: Admin layout with sidebar + header, dashboard page with content cards and quick actions.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-authentication-admin-foundation/09-CONTEXT.md
@.planning/phases/09-authentication-admin-foundation/09-01-SUMMARY.md

# Key files:
@src/app/globals.css
@src/app/layout.tsx
@src/components/Header.tsx
@src/lib/navigation.ts
@src/lib/supabase/server.ts

**Tech stack available:** Next.js 16.1.6, React 19, Tailwind CSS v4, @supabase/supabase-js, @supabase/ssr, @heroicons/react
**Established patterns:** Dark western theme (navy-900 bg, gold-500 accents, Montserrat headings, Inter body), component structure with Header/Footer/MobileMenu
**Constraining decisions:**
- 09-CONTEXT: Admin layout is the PRIORITY — sidebar, header, professional layout
- 09-CONTEXT: Same dark western aesthetic as public site — cohesive branding
- 09-CONTEXT: Non-technical board members must navigate easily
- 09-CONTEXT: Dashboard with content summary cards and quick-action buttons
- 09-CONTEXT: No actual CRUD yet — management features come in Phases 10-12
- 08-01: /admin routes removed from public nav
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create admin layout with sidebar and header</name>
  <files>src/app/admin/layout.tsx, src/components/AdminSidebar.tsx, src/components/AdminHeader.tsx, src/lib/admin-navigation.ts</files>
  <action>
Create src/lib/admin-navigation.ts:
- Export admin nav items array with structure: { label, href, icon (heroicon name reference), description }
- Items: Dashboard (/admin, HomeIcon), Shows (/admin/shows, CalendarDaysIcon), Sponsors (/admin/sponsors, BuildingStorefrontIcon), Results (/admin/results, TrophyIcon)
- These are placeholder routes for Phases 10-12 — they won't have pages yet but the nav structure should be ready

Create src/components/AdminSidebar.tsx (Client Component):
- Fixed left sidebar, w-64 on desktop, collapsible on mobile
- Navy-800 background with navy-700 border-right
- Top section: "SWMRHA" text logo in gold-500 with "Admin" badge below in smaller text
- Nav items as vertical list with icons (from @heroicons/react/24/outline), label text
- Active state: gold-500 text + gold-500/10 background + gold-500 left border (3px)
- Inactive state: gray-400 text, hover:white text + navy-700 background
- Bottom section: "View Site" link (opens / in new tab, ArrowTopRightOnSquareIcon)
- Use usePathname() from next/navigation for active state detection
- Mobile: hidden by default, shown via hamburger toggle from AdminHeader
- Accept isOpen and onToggle props for mobile visibility

Create src/components/AdminHeader.tsx (Client Component):
- Sticky top header within admin area, h-16
- Navy-800 background with navy-700 border-bottom
- Left: hamburger menu button (mobile only, Bars3Icon) to toggle sidebar
- Center/left: Current page title (derive from pathname or pass as prop)
- Right: User email display (truncated on small screens) + logout button
- Logout button: small form that POSTs to /admin/logout (not a link — CSRF protection)
- Use gold-500 for the logout icon (ArrowRightStartOnRectangleIcon)

Create src/app/admin/layout.tsx (Server Component):
- Fetch current user via Supabase server client (supabase.auth.getUser())
- If no user or user.app_metadata.role !== 'admin', redirect to /login (defense-in-depth — middleware already protects, but double-check)
- Do NOT include the public site Header and Footer — admin has its own layout
- Structure: flex row with sidebar (fixed) + main content area (flex-1, overflow-y-auto)
- Pass user email to AdminHeader for display
- Main content area: p-6 on desktop, p-4 on mobile, max-w-7xl container
- Background: navy-900 for the content area
- The layout should wrap {children} in the main content area

IMPORTANT: The admin layout must NOT inherit the public site's Header/Footer. Since the root layout.tsx includes Header and Footer, the admin layout needs to work within that constraint. Options:
- Use a route group: Move admin to (admin) route group with its own layout that doesn't include Header/Footer
- OR: Keep the simpler approach and suppress the public header/footer via CSS or conditional rendering

Recommended approach: Use conditional rendering in the root layout — check if pathname starts with /admin and skip Header/Footer. This requires making root layout a client component OR using a wrapper component that checks the path. The simplest approach: create a LayoutWrapper client component that conditionally renders Header/Footer based on pathname.
  </action>
  <verify>npm run build succeeds. Visit /admin (while logged in) — sidebar appears on left with navigation items, header shows at top with user email.</verify>
  <done>Admin layout renders with sidebar navigation, header with user info, and clean content area. No public Header/Footer visible in admin area. Mobile sidebar toggles correctly.</done>
</task>

<task type="auto">
  <name>Task 2: Create admin dashboard page with content cards</name>
  <files>src/app/admin/page.tsx</files>
  <action>
Create src/app/admin/page.tsx (Server Component):

Dashboard layout:
- Welcome heading: "Welcome back" with user's email or name below (get from Supabase server client)
- Subtitle: "SWMRHA Admin Dashboard"

Content summary cards (3-column grid on desktop, stack on mobile):
- Each card: navy-800 background, rounded-lg, p-6, navy-700 border
- Card structure: Icon (gold-500, w-8 h-8) + count number (large, white, font-bold) + label (gray-400) + "Manage →" link (gold-500, small)

Cards to display (with static counts from existing data files — import from src/data/):
1. Shows — CalendarDaysIcon — count from shows.ts data — link to /admin/shows
2. Sponsors — BuildingStorefrontIcon — count from sponsors.ts data — link to /admin/sponsors
3. Results — TrophyIcon — count from shows.ts results data — link to /admin/results

Quick actions section below cards:
- Heading: "Quick Actions"
- Button row (flex-wrap): "Add Show" (PlusIcon), "Add Sponsor" (PlusIcon), "Update Results" (PencilSquareIcon)
- Buttons: navy-700 background, white text, gold-500 icon, hover:navy-600, rounded-lg, px-4 py-3
- All quick action buttons link to their respective /admin/* pages (placeholder — pages don't exist yet, that's fine)

Recent activity section (static placeholder):
- Heading: "Recent Activity"
- Simple message: "Activity tracking will be available once management features are enabled."
- Styled as subtle card with navy-800 bg, gray-400 text, italic

The dashboard should feel like a real CMS landing page — professional, informative at a glance, with clear pathways to action.
  </action>
  <verify>npm run build succeeds. Visit /admin while logged in — dashboard shows welcome message, 3 content cards with accurate counts, quick action buttons, and activity placeholder.</verify>
  <done>Dashboard page renders with content summary cards showing real data counts, quick action buttons for future features, and professional admin feel matching dark western theme.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete admin layout with sidebar navigation and dashboard landing page</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/admin (must be logged in as admin)
    3. Desktop: Verify sidebar on left with nav items (Dashboard, Shows, Sponsors, Results), header at top with email + logout
    4. Verify: Dashboard shows welcome message, 3 content cards with counts, quick action buttons
    5. Verify: Dark western theme matches public site (navy/gold colors, same fonts)
    6. Verify: No public site header/footer visible in admin area
    7. Mobile (resize to ~375px): Verify sidebar collapses, hamburger menu appears, sidebar toggles on tap
    8. Test: Click "View Site" in sidebar → opens public site in new tab
    9. Test: Click logout → redirects to /login
    10. Visit: http://localhost:3000/ → public site unchanged, no admin elements visible
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Admin layout renders without public Header/Footer
- [ ] Sidebar navigation with correct icons and active states
- [ ] Header shows user email and functional logout
- [ ] Dashboard page with content summary cards
- [ ] Quick action buttons present and linked
- [ ] Mobile responsive — sidebar collapses
- [ ] npm run build succeeds
- [ ] Public site unaffected
- [ ] Phase 9 complete — all 3 plans done
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Admin area feels like a professional CMS
- Non-technical users can navigate sidebar intuitively
- Dark western aesthetic consistent with public site
- No TypeScript errors
- Phase 9: Authentication & Admin Foundation complete
</success_criteria>

<output>
After completion, create `.planning/phases/09-authentication-admin-foundation/09-03-SUMMARY.md`
</output>
